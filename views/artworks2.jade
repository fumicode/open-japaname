extends /template/simple_struct
block body
  - if(preview){
  -   artwork_width = 50; //mm
  - }
  - var artwork_height = artwork_width * artwork.ratio;


  if preview || sizing
    div
      a(href="/") トップへ戻る
      | --
      a(href="/#{japaname.code}") #{japaname.string} さんのページへ戻る

      | 他のJapaname
      form#other_japaname_form(style="display:inline")
        input#other_japaname(type="text" name="other_japaname")
        input#other_japaname_submit(type="submit" value="get other")

        
        

  if preview
    h1 プレビュー #{artwork.artwork_name} #{japaname.code} 

  if sizing 
    table
      tr
        td
          form(action="" method="GET")
            p
              |印刷する幅  
              input(type="text" name="artwork_width" value="#{artwork_width}")
              |mm
        td
          form(action="/shops/arton/artworks/#{artwork.artwork_name}/#{japaname.code}/print" method="GET")
            input(type="hidden" name="artwork_width" value="#{artwork_width}")
            input(type="submit" value="印刷する")



  div(style="text-align:center ;")
    object(type="image/svg+xml" data="/shops/arton/artworks/#{artwork.artwork_name}/#{japaname.code}/thumbnail" style="width:#{artwork_width}mm")

  if(preview)
    div
      form(action="/purchases/#{artwork.artwork_name}/#{japaname.code}/" method="post")
        input(type="submit" value="購入してサイズ調整して印刷する")

block append body-end-scripts
  script(src="/javascripts/jquery.min.js" type="text/javascript")

  script(type="text/javascript").
    $(function(){
      $("#other_japaname_form").submit(function(e){
        e.preventDefault();
        var japaname_code = $("#other_japaname").val();
        var url = "/shops/arton/artworks/#{artwork.artwork_name}/"+japaname_code+"";
        window.location = url;
      });
    });


  if print
    script(type="text/javascript").
      setTimeout(function(){
        window.print();
      },1000);

  script(type="text/javascript" src="https://use.typekit.net/yjx8eou.js")
  script try{Typekit.load({ async: true });} catch(e){alert(e)}

