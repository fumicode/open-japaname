extends /template/simple_struct

block body

  - var artwork_name  = "risumaru_ofuda"
  - if(preview){
  -  artwork_width = 50; //mm
  -  var artwork_height = artwork_width / 5*9;
  - }else{
  -  var artwork_height = artwork_width / 5*9;
  - }

  if(preview)
    h1 プレビュー #{artwork_name} #{japaname.code} 

  
  div(style="text-align:center ;")
    svg(id="artwork_svg" style="margin:0 auto; width:#{artwork_width}mm; height:#{artwork_height}mm;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink") 

  if(preview)
    div
      form(action="/purchases/#{artwork_name}/#{japaname.code}/" method="post")
        input(type="submit" value="購入して印刷する")

block append body-end-scripts
  script(src="/javascripts/jquery.min.js" type="text/javascript")
  script(type="text/javascript" src="/javascripts/snap.svg-min.js")

  script(type="text/javascript").
    var artwork_name = "#{artwork_name}";
    var variables = {
      japaname_string:"#{japaname.names[0].ateji.string}",
      japaname_code:  "#{japaname.code}",
      japaname_url:   "#{japaname.code}",
      original_name:  "#{japaname.names[0].original}",
    };
  script(type="text/javascript" src="/javascripts/artwork_js/#{artwork_name}.js")

